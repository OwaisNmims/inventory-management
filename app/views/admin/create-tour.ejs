<%- include ('./partials/head') %>

  <!--  BEGIN NAVBAR  -->
  <%- include ('./partials/header') %>
    <!--  END NAVBAR  -->

    <!--  BEGIN MAIN CONTAINER  -->
    <div class="main-container" id="container">

      <div class="overlay"></div>
      <div class="search-overlay"></div>

      <!--  BEGIN SIDEBAR  -->
      <%- include ('./partials/sidebar') %>
        <!--  END SIDEBAR  -->

        <!--  BEGIN CONTENT AREA  -->
        <div id="content" class="main-content">
          <div class="layout-px-spacing">

            <div class="middle-content container-xxl p-0">

              <!--  BEGIN BREADCRUMBS  -->
              <div class="secondary-nav">
                <div class="breadcrumbs-container" data-page-heading="Analytics">
                  <header class="header navbar navbar-expand-sm">
                    <a href="javascript:void(0);" class="btn-toggle sidebarCollapse" data-placement="bottom">
                      <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none"
                        stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"
                        class="feather feather-menu">
                        <line x1="3" y1="12" x2="21" y2="12"></line>
                        <line x1="3" y1="6" x2="21" y2="6"></line>
                        <line x1="3" y1="18" x2="21" y2="18"></line>
                      </svg>
                    </a>
                    <div class="d-flex breadcrumb-content">
                      <div class="page-header">

                        <div class="page-title">
                        </div>

                        <nav class="breadcrumb-style-one" aria-label="breadcrumb">
                          <ol class="breadcrumb">
                            <li class="breadcrumb-item active"><a href="/admin/dashboard">Home</a></li>
                            <!-- <li class="breadcrumb-item active" aria-current="page">Analytics</li> -->

                          </ol>
                        </nav>

                      </div>
                    </div>

                  </header>
                </div>
              </div>
              <!--  END BREADCRUMBS  -->
              <h2 class="fw-bold my-4">Create Tour</h2>
              <div class="row mb-4 pb-3">

                <div class="col-lg-6 col-md-6">
                  <div class="input-group mb-3 d-flex flex-column">
                    <label class="form-label">Tour Name</label>
                    <input type="text" name="tour-name" id="tour-name" placeholder="Enter Name" class="w-100">
                  </div>
                </div>


                <div class="col-lg-6 col-md-6">
                  <div class="input-group mb-3 d-flex flex-column">
                    <label class="form-label">Tour Nights</label>
                    <input type="number" name="tour-nights" id="tour-nights" placeholder="Enter Tour Nights"
                      class="w-100">
                  </div>
                </div>
              </div>

              <div class="d-flex justify-content-center align-items-center">

                <button class="form-control btn-success create-tour">Create Tour</button>

              </div>


            </div>
            <!--  BEGIN FOOTER  -->
            <!-- <div class="footer-wrapper">
                <div class="footer-section f-section-1">
                    <p class="">Copyright Â© <span class="dynamic-year">2023</span> <a target="_blank" href="">Autoriders
                            International Ltd</a>, All rights reserved.</p>
                </div>
            </div> -->
            <!--  END FOOTER  -->
          </div>
          <!--  END CONTENT AREA  -->

        </div>
        <!-- END MAIN CONTAINER -->
        <%- include ('./partials/footer') %>

          <script>
            $(document).ready(function () {

              $(".create-tour").on('click', function () {
                let tourName = $('#tour-name').val().trim()
                let tourNights = $("#tour-nights").val()
                console.log('tour name::::::::::::::', tourName)
                console.log('tour tourNights::::::::::::::', tourNights)
                if (tourName == "") {
                  createAlert({
                    title: 'ERROR',
                    msg: 'Tour Name Cannot be empty',
                    type: 'negative'
                  })
                  return;
                }
                if (tourNights <= 0) {
                  createAlert({
                    title: 'ERROR',
                    msg: 'Tour Nights Cannot be zero or less than zero',
                    type: 'negative'
                  })
                  return;
                }
                if (!tourNights) {
                  createAlert({
                    title: 'ERROR',
                    msg: 'Tour Nights Cannot be empty',
                    type: 'negative'
                  })
                  return;
                }

                $.ajax({
                  method: "POST", // The HTTP method (GET, POST, etc.)
                  url: "/admin/tour/create", // The URL of the server endpoint
                  data: {
                    tour_name: tourName,
                    tour_nights: tourNights
                  }, // The expected data type of the response
                  success: function (response, textStatus, jqXHR) {
                    // Handle the response data here
                    console.log('response >>>>>>>>>>>>', response);

                    if (jqXHR.status == 200) {
                      createAlert({
                        title: 'Success',
                        msg: 'Tour created Successfully',
                        type: 'positive'
                      })
                      location.href = `/admin/tour/edit-details/${response.tourLid}`;
                    } else {

                      createAlert({
                        title: 'Error',
                        msg: response.message,
                        type: 'negative'
                      })
                    }
                    // $("#add-country-modal").modal("hide");
                  },
                  error: function (error) {
                    // Handle errors here
                    createAlert({
                      title: "ERROR",
                      msg: "not done",
                      type: "negative",
                    });
                    // alert("ERROR")
                    //     location.reload(true);
                    // $("#add-country-modal").modal("hide");
                  },
                });


              })

            })
          </script>

          <%- include ('./partials/footer-end') %>